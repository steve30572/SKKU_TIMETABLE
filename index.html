<!DOCTYPE html>
<html>

<head>
	<!-- Required meta tags -->
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<!-- Bootstrap CSS -->
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet"
		integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.1/font/bootstrap-icons.css">

	<title>SKKU course enrollment backpack</title>
	<style>
		.container {
			width: 640px;
		}
	</style>
</head>
<body>
    <input type="text" id="myInput_Name" onkeyup="myFunction_Name()" placeholder="과목명으로 검색">
    <input type="text" id="myInput_Professor" onkeyup="myFunction_Professor()" placeholder="교수명으로 검색">
    <div style="width:100%; height:200px; overflow:auto">
    <table class="table" id="myTable">
        <thead>
          <tr>
            <th scope="col">총 정원</th>
            <th scope="col">과목명</th>
            <th scope="col">교수명</th>
            <th scope="col">수업시간</th>
            <th scope="col">추가하기</th>
          </tr>
        </thead>
        <tbody>
          <tr id="OSS">
            <th scope="row">10</th>
            <td class="row-data">오픈소스실습</td>
            <td class="row-data">Mark</td>
            <td class="row-data">1:30~2:45(월),12:00~1:15(수)</td>
            <td><button class="to_backpack" onclick="show()">추가하기</button></td>
          </tr>
          <tr id="SP">
            <th scope="row">30</th>
            <td class="row-data">시스템 프로그램</td>
            <td class="row-data">Kim</td>
            <td class="row-data">9:00~12:00(월)</td>
            <td><button class="to_backpack" onclick="show()">추가하기</button></td>
          </tr>
          <tr id="Algo">
            <th scope="row">100</th>
            <td class="row-data" >알고리즘개론</td>
            <td class="row-data">Lee</td>
            <td class="row-data">15:00~16:15(화),16:30~17:45(목)</td>
            <td><button class="to_backpack" onclick="show()">추가하기</button></td>
          </tr>
          
          
        </tbody>
      </table>
    </div>
      <script>
        function show(){
          var ID=event.target.parentNode.parentNode.id;
          var data=document.getElementById(ID).querySelectorAll(".row-data");
          console.log(data[0].innerHTML);
          //여기다가 책가방 쪽에다가 추가하는 기능 만들기//
        }
          function myFunction_Name() {
  // Declare variables
  var input, filter, table, tr, td, i, txtValue;
  input = document.getElementById("myInput_Name");
  filter = input.value.toUpperCase();
  table = document.getElementById("myTable");
  tr = table.getElementsByTagName("tr");

  // Loop through all table rows, and hide those who don't match the search query
  for (i = 0; i < tr.length; i++) {
    td = tr[i].getElementsByTagName("td")[0];
    if (td) {
      txtValue = td.textContent || td.innerText;
      if (txtValue.toUpperCase().indexOf(filter) > -1) {
        tr[i].style.display = "";
      } else {
        tr[i].style.display = "none";
      }
    }
  }
}
function myFunction_Professor() {
  // Declare variables
  var input, filter, table, tr, td, i, txtValue;
  input = document.getElementById("myInput_Professor");
  filter = input.value.toUpperCase();
  table = document.getElementById("myTable");
  tr = table.getElementsByTagName("tr");

  // Loop through all table rows, and hide those who don't match the search query
  for (i = 0; i < tr.length; i++) {
    td = tr[i].getElementsByTagName("td")[1];
    if (td) {
      txtValue = td.textContent || td.innerText;
      if (txtValue.toUpperCase().indexOf(filter) > -1) {
        tr[i].style.display = "";
      } else {
        tr[i].style.display = "none";
      }
    }
  }

}
      </script>
</body>
<!DOCTYPE html>
<html>

<body>
    <div id = wrap>
        <div id = left>
            <div id = all>
                <div id = search>
                    <input type = "text" placeholder="검색어 입력">
                    <button> 검색</button>
                </div>
                <table>
                    <tr> 
                        <th>과목명 <button> 정렬</button></th>
                        <th>교수명 <button> 정렬</button></th>
                        <th>시간 <button> 정렬</button></th>
                        <th>정원 <button> 정렬</button></th>    
                    </tr>
                    <tr> 
                        <th>과목명 </th>
                        <th>교수명 </th>
                        <th>시간 </th>
                        <th>정원 </th>    
                    </tr>
                </table>
                
            </div>
            
        </div>


        <div id = right>
            <div id = pack>
                <table>
                    <tr>
                        <th>과목명 <button> 정렬</button></th>
                        <th>교수명 <button> 정렬</button></th>
                        <th>시간 <button> 정렬</button></th>
                        <th>정원 <button> 정렬</button></th>
                    </tr>
                    <tr> 
                        <th>과목명 </th>
                        <th>교수명 </th>
                        <th>시간 </th>
                        <th>정원 </th>    
                    </tr>
                </table>
                
            </div>
            <hr>
            <div id = wrong>
                <table>
                    <tr>
                        <th>과목명 <button> 정렬</button></th>
                        <th>교수명 <button> 정렬</button></th>
                        <th>시간 <button> 정렬</button></th>
                        <th>정원 <button> 정렬</button></th>    
                    </tr>
                    <tr> 
                        <th>과목명 </th>
                        <th>교수명 </th>
                        <th>시간 </th>
                        <th>정원 </th>    
                    </tr>
                </table>
            </div>

            <a href="timeTable.html" target="_blank"">그림으로 보기</a>

        </div>
                                                     <div id="overlap">
          <br /><br />
          <div id="overlapMessage"></div>
          <script>
            //예시 과목들 (localstorage에서 불러올 예정)
            let subject2 = {
              name: "과목 2",
              day: 2,
              startTime: 13,
              length: 0.5,
            };

            let subject3 = {
              name: "과목 3",
              day: 2,
              startTime: 14.25,
              length: 0.5,
            };
            let tableSubjects = [subject1, subject2];

            let overlapped = 0;
            for (let i = 0; i < tableSubjects.length; i++) {
              for (let j = i + 1; j < tableSubjects.length; j++) {
                //겹치는 조건 확인
                if (
                  tableSubjects[i].startTime <
                    tableSubjects[j].startTime + tableSubjects[j].length &&
                  tableSubjects[i].startTime + tableSubjects[i].length >
                    tableSubjects[j].startTime
                ) {
                  if (overlapped == 0) {
                    let overlappedMessage = document.createElement("span");
                    overlappedMessage.textContent =
                      "시간이 겹치는 과목이 있습니다.";
                    document
                      .querySelector("#overlapMessage")
                      .appendchild("overlappedMessage");
                    overlapped++;
                  }
                  //겹친다는 메세지 생성
                  let newOverlapMessage = document.createElement("span");
                  let br = document.createElement("br");
                  newOverlapMessage.textContent =
                    tableSubjects[i].name + "," + tableSubjects[j].name;
                  //메세지 추가
                  document.querySelector("#overlapMessage").appendchild("br");
                  document
                    .querySelector("#overlapMessage")
                    .appendchild("newOverlapMessage");
                }
              }
            }
          </script>
        </div>
    </div>
</body>

</html>
