<!DOCTYPE html>
<html>
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <style>
      .center {
        margin-left: auto;
        margin-right: auto;
      }

      .wrapper {
        margin-left: auto;
        margin-right: auto;
        width: 450px;
      }

      .subject {
        color: white;
        text-align: left;
        vertical-align: top;
        padding: 10px;
        border: 0px;
      }

      .overlap {
        color: black;
        font-weight: bold;
        font-style: italic;
        text-align: center;
        background-image: repeating-linear-gradient(red, white, white 5%);
        border: 0px;
      }

      table,
      th {
        border: 1px solid black;
      }

      td {
        border-bottom: 1px solid #d8d8d8;
        border-left: 1px solid gray;
      }

      .bottom {
        border-bottom: 1px solid gray;
      }

      table {
        width: 100%;
        height: 50%;
        border-collapse: collapse;
      }
    </style>

    <title>My Timetable</title>
  </head>
  <div class="wrapper">
    <body>
      <button style="float: right" onClick="window.location.reload();">
        새로고침
      </button>
      <br /><br />
      <div>
        <table class="center">
          <thead>
            <tr>
              <th width="5%">&nbsp;</th>
              <th width="19%">mon</th>
              <th width="19%">tues</th>
              <th width="19%">wed</th>
              <th width="19%">thurs</th>
              <th width="19%">fri</th>
            </tr>
          </thead>
          <tbody>
            <div id="9">
              <tr>
                <th rowspan="4">9</th>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
              </tr>
              <tr>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
              </tr>
              <tr>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
              </tr>
              <tr>
                <td class="bottom">&nbsp;</td>
                <td class="bottom">&nbsp;</td>
                <td class="bottom">&nbsp;</td>
                <td class="bottom">&nbsp;</td>
                <td class="bottom">&nbsp;</td>
              </tr>
            </div>
            <div id="10">
              <tr>
                <th rowspan="4">10</th>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
              </tr>
              <tr>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
              </tr>
              <tr>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
              </tr>
              <tr>
                <td class="bottom">&nbsp;</td>
                <td class="bottom">&nbsp;</td>
                <td class="bottom">&nbsp;</td>
                <td class="bottom">&nbsp;</td>
                <td class="bottom">&nbsp;</td>
              </tr>
            </div>
            <div id="11">
              <tr>
                <th rowspan="4">11</th>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
              </tr>
              <tr>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
              </tr>
              <tr>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
              </tr>
              <tr>
                <td class="bottom">&nbsp;</td>
                <td class="bottom">&nbsp;</td>
                <td class="bottom">&nbsp;</td>
                <td class="bottom">&nbsp;</td>
                <td class="bottom">&nbsp;</td>
              </tr>
            </div>
            <div id="12">
              <tr>
                <th rowspan="4">12</th>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
              </tr>
              <tr>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
              </tr>
              <tr>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
              </tr>
              <tr>
                <td class="bottom">&nbsp;</td>
                <td class="bottom">&nbsp;</td>
                <td class="bottom">&nbsp;</td>
                <td class="bottom">&nbsp;</td>
                <td class="bottom">&nbsp;</td>
              </tr>
            </div>
            <div id="1">
              <tr>
                <th rowspan="4">1</th>
                <td>&nbsp;</td>
                <td class="subject" bgcolor="orange" rowspan="2">과목 1</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
              </tr>
              <tr>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
              </tr>
              <tr>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
              </tr>
              <tr>
                <td class="bottom">&nbsp;</td>
                <td class="bottom">&nbsp;</td>
                <td class="bottom">&nbsp;</td>
                <td class="bottom">&nbsp;</td>
                <td class="bottom">&nbsp;</td>
              </tr>
            </div>
            <div id="2">
              <tr>
                <th rowspan="4">2</th>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
              </tr>
              <tr>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
              </tr>
              <tr>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
              </tr>
              <tr>
                <td class="bottom">&nbsp;</td>
                <td class="bottom">&nbsp;</td>
                <td class="bottom">&nbsp;</td>
                <td class="bottom">&nbsp;</td>
                <td class="bottom">&nbsp;</td>
              </tr>
            </div>
            <div id="3">
              <tr>
                <th rowspan="4">3</th>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
              </tr>
              <tr>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
              </tr>
              <tr>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
              </tr>
              <tr>
                <td class="bottom">&nbsp;</td>
                <td class="bottom">&nbsp;</td>
                <td class="bottom">&nbsp;</td>
                <td class="bottom">&nbsp;</td>
                <td class="bottom">&nbsp;</td>
              </tr>
            </div>
            <div id="4">
              <tr>
                <th rowspan="4">4</th>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
              </tr>
              <tr>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
              </tr>
              <tr>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
              </tr>
              <tr>
                <td class="bottom">&nbsp;</td>
                <td class="bottom">&nbsp;</td>
                <td class="bottom">&nbsp;</td>
                <td class="bottom">&nbsp;</td>
                <td class="bottom">&nbsp;</td>
              </tr>
            </div>
            <div id="5">
              <tr>
                <th rowspan="4">5</th>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
              </tr>
              <tr>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
              </tr>
              <tr>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
              </tr>
              <tr>
                <td class="bottom">&nbsp;</td>
                <td class="bottom">&nbsp;</td>
                <td class="bottom">&nbsp;</td>
                <td class="bottom">&nbsp;</td>
                <td class="bottom">&nbsp;</td>
              </tr>
            </div>
            <div id="6">
              <tr>
                <th rowspan="4">6</th>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
              </tr>
              <tr>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
              </tr>
              <tr>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
              </tr>
              <tr>
                <td class="bottom">&nbsp;</td>
                <td class="bottom">&nbsp;</td>
                <td class="bottom">&nbsp;</td>
                <td class="bottom">&nbsp;</td>
                <td class="bottom">&nbsp;</td>
              </tr>
            </div>
            <div id="7">
              <tr>
                <th rowspan="4">7</th>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
              </tr>
              <tr>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
              </tr>
              <tr>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
              </tr>
              <tr>
                <td class="bottom">&nbsp;</td>
                <td class="bottom">&nbsp;</td>
                <td class="bottom">&nbsp;</td>
                <td class="bottom">&nbsp;</td>
                <td class="bottom">&nbsp;</td>
              </tr>
            </div>
            <div id="8">
              <tr>
                <th rowspan="4">8</th>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
              </tr>
              <tr>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
              </tr>
              <tr>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
              </tr>
              <tr>
                <td class="bottom">&nbsp;</td>
                <td class="bottom">&nbsp;</td>
                <td class="bottom">&nbsp;</td>
                <td class="bottom">&nbsp;</td>
                <td class="bottom">&nbsp;</td>
              </tr>
            </div>
            <div id="9">
              <tr>
                <th rowspan="4">9</th>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
              </tr>
              <tr>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
              </tr>
              <tr>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
              </tr>
              <tr>
                <td class="bottom">&nbsp;</td>
                <td class="bottom">&nbsp;</td>
                <td class="bottom">&nbsp;</td>
                <td class="bottom">&nbsp;</td>
                <td class="bottom">&nbsp;</td>
              </tr>
            </div>
          </tbody>
        </table>
      </div>
        <script>
        //예시 과목들 (localstorage에서 불러올 예정)
        let subject1 = {
          name: "오픈소스소프트웨어실습",
          day: 1,
          startTime: 10.5,
          length: 1.25,
        };

        let subject2 = {
          name: "과목 2",
          day: 2,
          startTime: 13,
          length: 0.5,
        };

        let subject3 = {
          name: "과목 3",
          day: 2,
          startTime: 14.25,
          length: 0.5,
        };

        let overlap1 = {
          name: "overlapped time",
          day: 2,
          startTime: 13.5,
          length: 0.75,
        };

        let tableSubjects = [subject1, subject2, subject3, overlap1];
        function showSubjects() {
          tableSubjects.forEach(addToTable);
        }

        trList = document.querySelectorAll("tr");
        tdList = [];
        let colorcode = 0;
        let color;
        function addToTable(subject) {
          let startTr = (subject.startTime - 9) / 0.25 + 1;
          let rowSpan = subject.length / 0.25;

          setColor();
          //과목 만들기
          let newTd = document.createElement("td");
          if (subject.name !== "overlapped time") {
            newTd.setAttribute("class", "subject");
            newTd.setAttribute("bgcolor", color);
            newTd.setAttribute("rowspan", rowSpan);
            newTd.textContent = subject.name;
          } else {
            newTd.setAttribute("class", "overlap");
            newTd.setAttribute("rowspan", rowSpan);
            newTd.textContent = "(겹침)";
          }
          //과목이 들어갈 자리 다 지우기
          for (let i = 0; i < rowSpan; i++) {
            let tdList2 = trList[startTr + i].querySelectorAll("td");
            tdList2[subject.day].remove();
          }
          //과목 삽입
          tdList = trList[startTr].querySelectorAll("td");
          let beforeTd = tdList[subject.day - 1];
          trList[startTr].insertBefore(newTd, beforeTd);
        }

        function setColor() {
          switch (colorcode % 10) {
            case 0:
              color = "green";
              break;
            case 1:
              color = "orange";
              break;
            case 2:
              color = "blue";
              break;
            case 3:
              color = "crimson";
              break;
            case 4:
              color = "deeppink";
              break;
            case 5:
              color = "orangered";
              break;
            case 6:
              color = "blueviolet";
              break;
            case 7:
              color = "chocolate";
              break;
            case 8:
              color = "gray";
              break;
            case 9:
              color = "black";
              break;
          }
          colorcode++;
        }
        window.addEventListener("load", () => {
          showSubjects();
        });
      </script>
    </body>
  </div>
</html>
